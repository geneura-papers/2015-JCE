%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  ejemplo.tex %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%% Fichero de ejemplo LaTeX que ilustra el uso de la Hoja de Estilo %%%%%%
%%%%% Jornadas.cls para Jornadas Sarteco.              %%%%%%

\documentclass[twocolumn,twoside]{Jornadas}
\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage{url}

\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}

\newtheorem{theorem}{Teorema}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\hyphenation{}

\begin{document}


\title{Arquitectura de bajo coste para monitorización de vehículos y personas usando Bluetooth y WiFi}

\author{%
     Pablo García-Sánchez, Antonio Fernández-Ares, Pedro Castillo, María Isabel García Arenas,  A. M. Mora, Gustavo Romero, Juan Julián Merelo %
     \thanks{Dpto. de Arquitectura y Tecnología de Computadores, Universidad de Granada, e-mail: {\tt {pablogarcia,antares,pacv,mgarenas,amorag,jmerelo}@ugr.es}}
     Pedro García-Fernández%
     \thanks{Departamento de Electrónica y Tecnología de  Computadores, Universidad de Granada, e-mail: {\tt pfernan@ditec.ugr.es }}
}

\maketitle
% Oculta las cabeceras y los n\'umeros de p\'agina.
% Ambos elemetos se a\~nadir\'an durante la edici\'on de las actas completas.
\markboth{}{}
\pagestyle{empty} 
\thispagestyle{empty} % Oculta el n\'umero de la primera p\'agina

\begin{abstract}
Actualmente existen distintos sistemas de monitorización de vehículos ... Este paper describe el entorno hardware y software de un sistema de monitorización de vehículos y personas utilizando Bluetooth y Wifi. 
\end{abstract}

\begin{keywords}
Bluetooth, Predicción del Tráfico, Monitorización, WiFi
\end{keywords}

\section{Introducci\'on}
\PARstart{E}{s} un hecho innegable que nos encontramos \cite{Castillo13Indicadores}

\section{Estado del arte}

Otros trabajos han utilizado routers WiFi para posicionaminto. Por ejemplo, en \cite{Rivadeneyra10Wifi} se utiliza la intensidad de hotspots wifi en un dispositivo móvil para localización en interiores, usando una base de datos de intensidades y posiciones como base. Sin embargo, es el dispositivo móvil el que permite conocer la localización de la persona, lo que obliga a instalar una aplicación para detectar usuarios. Además, cambios en la infraestructura de los hotspots implicaría volver a recalcular la base de datos de intensidades.

En \cite{Castillo13Indicadores} se presentó una versión preliminar del sistema descrito en este trabajo. En ese trabajo se mostraron unos prototipos de monitorización basados en arquiectura microPC, junto con algunos datos de monitorización. Sin embargo, ese trabajo no explicaba el proceso de captación de datos ni describía la arquitectura software y hardware del sistema (que además, estaba en un versión anterior a la presentada aquí). El presente trabajo, por lo tanto, permitirá a nuevos investigadores desarrollar su propio sistema de monitorización teniendo en cuenta las decisiones de diseño tomadas para esta nueva versión. 

\section{Descripción del sistema}

El sistema explicado en este artículo está formado por dos elementos: el sistema hardware (dispositivos físicos de monitorización y servidor) y el sistema software (software de captación en los dispositivos y del servidor).


\subsection{Descripción del hardware}

\subsection{Dispositivos de monitorización}

Los dispositivos utilizados están compuestos de los siguientes elementos:
\begin{itemize}
\item Dispositivo de procesamiento
\item Antenas de captación
\item Caja protectora
\end{itemize}

\begin{figure*}[htb] 
\centering
%\includegraphics[width=10cm]{imags/raspi.eps}
%\epsfig{file=images/sindicador.eps,width=12cm}

\caption{Raspberry Pi utilizada en los dispositivos de monitorización.} 
\label{fig:raspberry} 
\end{figure*}


\subsection{Descripción del software}

El software que soporta el sistema, está formado por varios módulos independientes, que se relacionan entre ellos según la figura \ref{fig:sindicador}. 

\begin{figure*}[ht] 
\begin{center} 
\includegraphics[scale=0.35]{imags/DiagramaSoftware.eps}
%\epsfig{file=imags/DiagramaSoftware.eps,width=7cm}
\end{center} 
\caption{Descripción del sistema.} 
\label{fig:sindicador} 
\end{figure*}

Como se puede apreciar en el sistema, existen cinco partes bien diferenciadas a las que hemos etiquetado con un nombre, Raziel, Lilith, Abdiel, Ezequiel y Anan que se relacionan entre ellas unidireccionalmente según el flujo de los datos. En el dispositivo se ejecutan Raziel y Lilith implementados en Java y en PHP respectivamente y ambas corren sobre el sistema operativo Horeb. Ambas partes de forma independiente envían datos a Abdiel, también implemenado en PHP, que es el único que tiene acceso a la base de datos Alejandría gestionada por MySQL. De las consultas a la base de datos Alejandría se ocupa Ezequiel, también implementado en PHP. Tanto Ezequiel, como Abdiel se ejecutan de forma simultánea en el servidor donde está almacenada la base de datos. Este servidor tiene un sistema operativo Linux. Por último Anan  .....

% Antares amplía aquí un poco sobre Anan.

En el párrafo anterior hemos descrito un la relación entre las partes y los diferentes sistemas operativos y lenguajes que hemos utilizado. A continuación detallaremos un poco la función de cada una de las partes, intentando no entrar en muchos detalles, puesto que no disponemos del suficiente espacio.
\begin{itemize}
\item Raziel: La función de Raziel es la captación de dispositivos. Esta captación se hace escaneando el entorno donde está situado y captando paquetes BT o Wifi que emiten los dispositivos cuando intentan descubrir otros dispositivos BT o un punto de acceso Wifi a los que conectarse. Los pasos que sigue Raziel a grandes rasgos son:
 \begin{enumerate}
 \item Comprobación de que la conexión a red para conectar con Abdiel está disponible, ya sea de forma inalámbrica o alámbrica.
 \item Inicializa la hebra de captación BT que se ejecutará durante todo el tiempo que Raziel esté ejecutándose. Esta hebra se encarga de detectar nuevos dispositivos BT, monitorizarlos registrando durante cuanto tiempo son detectados y notificar dicha información a Abdiel cada cierto tiempo.
 \item 
 \end{enumerate}
 \item{
 \end{itemize}
\item Lilith
\item Abdiel
\item Ezequiel
\item Anan
\end{itemize}



\section{Prototipo experimental}

\section{Conclusiones y trabajo futuro}

Como trabajo futuro se está planteando utilizar el modelo más avanzado de Raspberry Pi (modelo 2), que permitirá añadir nuevos dispositivos de captación (GSM, luminosidad, temperatura, etc.).


\section*{Agradecimientos}


\bibliographystyle{Jornadas}
\bibliography{monitorizacion-jce}

\end{document}
